---
title: Schema Definition
description: Complete reference for defining objects and field types in ObjectQL
---

# Schema Definition

This document provides the complete specification for ObjectQL's Schema definition language.

## Object Definition

An object represents a database table:

```typescript
{
  objects: {
    [objectName: string]: {
      label?: string              // Display name
      icon?: string               // UI icon
      enable_files?: boolean      // Enable file attachments
      enable_search?: boolean     // Enable full-text search
      enable_tasks?: boolean      // Enable task tracking
      enable_notes?: boolean      // Enable notes
      enable_api?: boolean        // Expose via API (default: true)
      enable_share?: boolean      // Enable record sharing
      fields: { /* field definitions */ }
      list_views?: { /* view definitions */ }
      triggers?: { /* trigger definitions */ }
      actions?: { /* action definitions */ }
      permissions?: { /* permission definitions */ }
    }
  }
}
```

## Field Types Reference

### Text Fields

```typescript
{
  // Short text (VARCHAR)
  field_name: {
    type: 'text',
    label?: string,
    defaultValue?: string,
    required?: boolean,
    unique?: boolean,
    index?: boolean,
    minLength?: number,
    maxLength?: number,
    pattern?: string        // Regex pattern
  },
  
  // Long text (TEXT)
  description: {
    type: 'textarea',
    rows?: number           // UI hint for rows
  },
  
  // Rich HTML content
  content: {
    type: 'html'
  },
  
  // Email with validation
  email: {
    type: 'email',
    unique?: boolean
  },
  
  // URL with validation
  website: {
    type: 'url'
  }
}
```

### Numeric Fields

```typescript
{
  // Integer
  quantity: {
    type: 'number',
    scale: 0,               // No decimals
    min?: number,
    max?: number,
    defaultValue?: number
  },
  
  // Decimal
  price: {
    type: 'currency',
    scale: 2,               // 2 decimal places
    precision?: number      // Total digits (default: 15)
  },
  
  // Percentage
  discount: {
    type: 'percent',
    scale: 2
  },
  
  // Auto-number (sequence)
  invoice_number: {
    type: 'autonumber',
    formula: 'INV-{0000}'   // Format pattern
  }
}
```

### Date and Time Fields

```typescript
{
  // Date only (YYYY-MM-DD)
  birth_date: {
    type: 'date',
    min?: string,           // '1900-01-01'
    max?: string            // '2100-12-31'
  },
  
  // Date and time
  created_at: {
    type: 'datetime',
    defaultValue?: string | (() => Date)
  },
  
  // Time only
  start_time: {
    type: 'time'
  }
}
```

### Boolean and Select Fields

```typescript
{
  // Boolean checkbox
  is_active: {
    type: 'boolean',
    defaultValue?: boolean
  },
  
  // Single select (dropdown)
  status: {
    type: 'select',
    options: [
      { label: 'Draft', value: 'draft' },
      { label: 'Published', value: 'published' }
    ],
    // Or simple array
    // options: ['draft', 'published', 'archived']
    defaultValue?: string
  },
  
  // Multi-select
  tags: {
    type: 'multiSelect',
    options: ['urgent', 'important', 'low-priority']
  }
}
```

### Relationship Fields

```typescript
{
  // Master-Detail (required foreign key)
  // Child record deleted when parent deleted
  account: {
    type: 'master_detail',
    reference_to: 'account',
    required: true,
    on_delete?: 'cascade' | 'restrict'  // Default: cascade
  },
  
  // Lookup (optional foreign key)
  // Relationship preserved when parent deleted
  manager: {
    type: 'lookup',
    reference_to: 'user',
    reference_to_field?: '_id'  // Default: _id
  },
  
  // Formula field (computed)
  full_name: {
    type: 'formula',
    formula: '{first_name} {last_name}',
    data_type: 'text'
  },
  
  // Summary (rollup from related records)
  total_opportunities: {
    type: 'summary',
    summary_object: 'opportunity',
    summary_type: 'count',
    summary_field: '_id',
    summary_filters: [['stage', '=', 'closed_won']]
  }
}
```

### Special Fields

```typescript
{
  // File attachment
  avatar: {
    type: 'image',
    accept?: string         // 'image/*'
  },
  
  // Multiple files
  attachments: {
    type: 'filesize',
    multiple?: boolean      // Allow multiple files
  },
  
  // JSON data
  metadata: {
    type: 'json',
    schema?: object         // JSON Schema for validation
  },
  
  // Geolocation
  location: {
    type: 'location'        // Stores { lat, lng, address }
  },
  
  // Markdown content
  notes: {
    type: 'markdown'
  }
}
```

## Field Constraints

```typescript
{
  field_name: {
    type: 'text',
    
    // Validation
    required: boolean,      // NOT NULL
    unique: boolean,        // UNIQUE constraint
    index: boolean,         // Create index
    
    // Text constraints
    minLength: number,
    maxLength: number,
    pattern: string,        // Regex
    
    // Numeric constraints
    min: number,
    max: number,
    scale: number,          // Decimal places
    precision: number,      // Total digits
    
    // Default value
    defaultValue: any | (() => any),
    
    // Visibility
    hidden: boolean,        // Hide from UI
    readonly: boolean,      // Read-only
    
    // Dependencies
    depends_on: string[],   // Field dependencies
    visible_on: string      // Conditional visibility
  }
}
```

## Next Steps

- Learn [Query DSL](/docs/02-objectql/protocol-spec/query-dsl) for querying data
- Explore [Aggregation](/docs/02-objectql/protocol-spec/aggregation) for data analysis
- Master [Mutation Operations](/docs/02-objectql/protocol-spec/mutation) for data modification
