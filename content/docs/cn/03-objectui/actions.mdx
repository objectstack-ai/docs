---
title: 操作
description: ObjectUI 中的交互行为和事件处理器
---

# 操作(Actions)

操作定义 ObjectUI 中的交互行为。

## API 请求

发起 HTTP 请求。

**协议:**

```typescript
{
  type: 'api',
  api: string,                // API 端点
  method?: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE',
  data?: object | string,     // 请求体 (支持模板)
  headers?: object,           // 请求头
  confirm?: string,           // 确认消息
  onSuccess?: Action,         // 成功处理器
  onError?: Action,           // 错误处理器
}
```

**示例:**

```json
{
  "type": "button",
  "label": "保存",
  "onClick": {
    "type": "api",
    "api": "/api/users/${userId}",
    "method": "PUT",
    "data": "${formData}",
    "confirm": "保存更改?",
    "onSuccess": {
      "type": "toast",
      "message": "保存成功!"
    }
  }
}
```

## 导航

导航到不同页面。

**协议:**

```typescript
{
  type: 'navigate',
  url: string,                // 目标 URL (支持模板)
  newTab?: boolean,           // 在新标签页打开
  replace?: boolean,          // 替换当前历史记录
}
```

**示例:**

```json
{
  "type": "button",
  "label": "查看详情",
  "onClick": {
    "type": "navigate",
    "url": "/users/${userId}"
  }
}
```

## 对话框

打开模态对话框。

**协议:**

```typescript
{
  type: 'dialog',
  title?: string,
  width?: number | string,
  body: Component,
  footer?: Component[],
  closable?: boolean,
}
```

**示例:**

```json
{
  "type": "button",
  "label": "添加用户",
  "onClick": {
    "type": "dialog",
    "title": "创建新用户",
    "width": 600,
    "body": {
      "type": "form",
      "api": "/api/users",
      "fields": [...]
    }
  }
}
```

## 提示消息

显示通知消息。

**协议:**

```typescript
{
  type: 'toast',
  message: string,            // 消息文本 (支持模板)
  variant?: 'success' | 'error' | 'warning' | 'info',
  duration?: number,          // 自动关闭时长 (毫秒)
}
```

**示例:**

```json
{
  "type": "toast",
  "message": "操作成功完成!",
  "variant": "success",
  "duration": 3000
}
```

## 完整示例

### 用户管理 CRUD

```json
{
  "type": "page",
  "title": "用户管理",
  "actions": [
    {
      "label": "添加用户",
      "onClick": {
        "type": "dialog",
        "title": "创建用户",
        "body": {
          "type": "form",
          "api": "/api/users",
          "method": "POST",
          "fields": [
            { "type": "input", "name": "name", "label": "姓名", "required": true },
            { "type": "input", "name": "email", "label": "邮箱", "inputType": "email", "required": true },
            { "type": "select", "name": "role", "label": "角色", "options": [
              { "label": "管理员", "value": "admin" },
              { "label": "用户", "value": "user" }
            ]}
          ],
          "onSuccess": [
            { "type": "toast", "message": "用户已创建!" },
            { "type": "reload" }
          ]
        }
      }
    }
  ],
  "body": {
    "type": "table",
    "api": "/api/users",
    "columns": [
      { "name": "name", "label": "姓名", "sortable": true },
      { "name": "email", "label": "邮箱" },
      { "name": "role", "label": "角色" },
      { "name": "createdAt", "label": "创建时间", "type": "date" }
    ],
    "rowActions": [
      {
        "label": "编辑",
        "onClick": {
          "type": "dialog",
          "title": "编辑用户",
          "body": {
            "type": "form",
            "api": "/api/users/${id}",
            "method": "PUT",
            "initialValues": "${row}",
            "fields": [
              { "type": "input", "name": "name", "label": "姓名" },
              { "type": "input", "name": "email", "label": "邮箱" }
            ]
          }
        }
      },
      {
        "label": "删除",
        "onClick": {
          "type": "api",
          "api": "/api/users/${id}",
          "method": "DELETE",
          "confirm": "删除此用户?",
          "onSuccess": [
            { "type": "toast", "message": "用户已删除" },
            { "type": "reload" }
          ]
        }
      }
    ],
    "searchable": true,
    "pagination": true
  }
}
```

## 下一步

- **[基础组件](/docs/03-objectui/basic-components)** - 了解表单和输入组件
- **[容器组件](/docs/03-objectui/container-components)** - 了解布局组件
- **[渲染器使用](/docs/03-objectui/renderer-usage)** - 了解如何在应用中集成这些组件
