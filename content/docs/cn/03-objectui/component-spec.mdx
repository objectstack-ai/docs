---
title: 组件规范
description: 所有 ObjectUI 组件的完整协议参考
---

# 组件规范

这份全面的参考文档记录了所有 ObjectUI 组件及其 JSON 协议。

## 基础组件

基础组件是表单和数据输入的基本构建块。

### Input 输入框

单行文本输入字段。

**协议:**

```typescript
{
  type: 'input',
  name: string,              // 字段名
  label?: string,            // 显示标签
  placeholder?: string,      // 占位符文本
  defaultValue?: string,     // 默认值
  required?: boolean,        // 必填验证
  disabled?: boolean,        // 禁用状态
  maxLength?: number,        // 最大长度
  minLength?: number,        // 最小长度
  pattern?: string,          // 正则表达式
  inputType?: 'text' | 'email' | 'password' | 'url' | 'tel' | 'number',
  onChange?: Action,         // 变化事件处理器
}
```

**示例:**

```json
{
  "type": "input",
  "name": "email",
  "label": "邮箱地址",
  "placeholder": "user@example.com",
  "inputType": "email",
  "required": true,
  "maxLength": 255
}
```

**高级示例 - 依赖字段:**

```json
{
  "type": "form",
  "fields": [
    {
      "type": "input",
      "name": "username",
      "label": "用户名",
      "required": true,
      "onChange": {
        "type": "api",
        "api": "/api/check-username",
        "method": "POST",
        "data": { "username": "${value}" }
      }
    }
  ]
}
```

### Select 下拉选择

下拉选择字段。

**协议:**

```typescript
{
  type: 'select',
  name: string,
  label?: string,
  placeholder?: string,
  defaultValue?: string | number,
  required?: boolean,
  disabled?: boolean,
  multiple?: boolean,         // 允许多选
  searchable?: boolean,       // 启用搜索/过滤
  clearable?: boolean,        // 显示清除按钮
  options?: Array<{           // 静态选项
    label: string,
    value: string | number,
    disabled?: boolean
  }>,
  api?: string,               // 动态选项的 API 端点
  optionLabel?: string,       // 选项标签的字段名
  optionValue?: string,       // 选项值的字段名
  dependsOn?: string,         // 字段依赖
  onChange?: Action,
}
```

**示例 - 静态选项:**

```json
{
  "type": "select",
  "name": "status",
  "label": "状态",
  "placeholder": "选择状态",
  "required": true,
  "options": [
    { "label": "激活", "value": "active" },
    { "label": "未激活", "value": "inactive" },
    { "label": "待审核", "value": "pending" }
  ]
}
```

**示例 - 从 API 获取动态选项:**

```json
{
  "type": "select",
  "name": "category",
  "label": "分类",
  "api": "/api/categories",
  "optionLabel": "name",
  "optionValue": "id",
  "searchable": true
}
```

**示例 - 级联选择:**

```json
{
  "type": "form",
  "fields": [
    {
      "type": "select",
      "name": "country",
      "label": "国家",
      "api": "/api/countries"
    },
    {
      "type": "select",
      "name": "state",
      "label": "省/州",
      "api": "/api/states?country=${country}",
      "dependsOn": "country"
    }
  ]
}
```

### DatePicker 日期选择器

日期和时间选择组件。

**协议:**

```typescript
{
  type: 'datepicker',
  name: string,
  label?: string,
  placeholder?: string,
  defaultValue?: string | Date,
  required?: boolean,
  disabled?: boolean,
  mode?: 'date' | 'datetime' | 'time' | 'daterange',
  format?: string,            // 显示格式 (例如 'YYYY-MM-DD')
  minDate?: string | Date,    // 最小可选日期
  maxDate?: string | Date,    // 最大可选日期
  disabledDates?: string[],   // 禁用日期数组
  showTime?: boolean,         // 显示时间选择器
  onChange?: Action,
}
```

**示例 - 简单日期:**

```json
{
  "type": "datepicker",
  "name": "birthday",
  "label": "出生日期",
  "mode": "date",
  "maxDate": "today",
  "required": true
}
```

**示例 - 日期时间:**

```json
{
  "type": "datepicker",
  "name": "appointment",
  "label": "预约时间",
  "mode": "datetime",
  "format": "YYYY-MM-DD HH:mm",
  "minDate": "today",
  "showTime": true
}
```

**示例 - 日期范围:**

```json
{
  "type": "datepicker",
  "name": "dateRange",
  "label": "选择时间段",
  "mode": "daterange",
  "defaultValue": {
    "start": "2024-01-01",
    "end": "2024-12-31"
  }
}
```

### Switch 开关

布尔值的切换开关。

**协议:**

```typescript
{
  type: 'switch',
  name: string,
  label?: string,
  defaultValue?: boolean,
  disabled?: boolean,
  checkedText?: string,       // 选中时的文本
  uncheckedText?: string,     // 未选中时的文本
  onChange?: Action,
}
```

**示例:**

```json
{
  "type": "switch",
  "name": "isActive",
  "label": "激活状态",
  "defaultValue": true,
  "checkedText": "已激活",
  "uncheckedText": "未激活"
}
```

## 容器组件

容器组件用于组织和构建 UI 布局。

### Page 页面

顶级页面容器,带有标题和操作。

**协议:**

```typescript
{
  type: 'page',
  title: string,
  description?: string,
  icon?: string,
  breadcrumbs?: Array<{
    label: string,
    url?: string
  }>,
  actions?: Action[],         // 页头操作
  tabs?: Array<{
    label: string,
    key: string,
    body: Component
  }>,
  body: Component | Component[],
}
```

**示例:**

```json
{
  "type": "page",
  "title": "用户管理",
  "description": "管理系统用户和权限",
  "breadcrumbs": [
    { "label": "首页", "url": "/" },
    { "label": "用户" }
  ],
  "actions": [
    {
      "label": "添加用户",
      "type": "dialog",
      "body": {
        "type": "form",
        "api": "/api/users",
        "fields": [...]
      }
    }
  ],
  "body": {
    "type": "table",
    "api": "/api/users"
  }
}
```

### Grid 网格

响应式网格布局。

**协议:**

```typescript
{
  type: 'grid',
  columns?: number | {        // 列配置
    xs?: number,              // 超小设备
    sm?: number,              // 小设备
    md?: number,              // 中等设备
    lg?: number,              // 大设备
    xl?: number               // 超大设备
  },
  gap?: number | string,      // 项目间距
  items: Component[],
}
```

**示例:**

```json
{
  "type": "grid",
  "columns": { "xs": 1, "sm": 2, "lg": 3 },
  "gap": "20px",
  "items": [
    {
      "type": "card",
      "title": "总用户数",
      "body": { "type": "text", "value": "${stats.users}" }
    },
    {
      "type": "card",
      "title": "总订单数",
      "body": { "type": "text", "value": "${stats.orders}" }
    },
    {
      "type": "card",
      "title": "收入",
      "body": { "type": "text", "value": "¥${stats.revenue}" }
    }
  ]
}
```

### Card 卡片

带有标题、主体和页脚的卡片容器。

**协议:**

```typescript
{
  type: 'card',
  title?: string,
  description?: string,
  cover?: string,             // 封面图片 URL
  avatar?: string,            // 头像图片 URL
  actions?: Action[],
  body: Component | Component[],
  footer?: Component | Component[],
}
```

**示例:**

```json
{
  "type": "card",
  "title": "用户资料",
  "avatar": "${user.avatar}",
  "body": [
    { "type": "text", "value": "姓名: ${user.name}" },
    { "type": "text", "value": "邮箱: ${user.email}" },
    { "type": "text", "value": "角色: ${user.role}" }
  ],
  "actions": [
    { "label": "编辑", "onClick": { "type": "navigate", "url": "/users/${user.id}/edit" } },
    { "label": "删除", "onClick": { "type": "api", "api": "/api/users/${user.id}", "method": "DELETE" } }
  ]
}
```

### Form 表单

带有字段和提交处理的表单容器。

**协议:**

```typescript
{
  type: 'form',
  title?: string,
  api?: string,               // 提交端点
  method?: 'POST' | 'PUT' | 'PATCH',
  initialValues?: object,     // 初始表单值
  fields: FormField[],
  layout?: 'horizontal' | 'vertical' | 'inline',
  columns?: number,           // 多列布局
  submitText?: string,        // 提交按钮文本
  resetText?: string,         // 重置按钮文本
  showReset?: boolean,        // 显示重置按钮
  onSubmit?: Action,
  onSuccess?: Action,
  onError?: Action,
}
```

**示例 - 简单表单:**

```json
{
  "type": "form",
  "title": "创建用户",
  "api": "/api/users",
  "method": "POST",
  "fields": [
    {
      "type": "input",
      "name": "name",
      "label": "全名",
      "required": true
    },
    {
      "type": "input",
      "name": "email",
      "label": "邮箱",
      "inputType": "email",
      "required": true
    },
    {
      "type": "select",
      "name": "role",
      "label": "角色",
      "options": [
        { "label": "管理员", "value": "admin" },
        { "label": "用户", "value": "user" }
      ]
    }
  ],
  "submitText": "创建用户",
  "onSuccess": {
    "type": "toast",
    "message": "用户创建成功!"
  }
}
```

**示例 - 多列表单:**

```json
{
  "type": "form",
  "title": "用户注册",
  "columns": 2,
  "fields": [
    { "type": "input", "name": "firstName", "label": "名" },
    { "type": "input", "name": "lastName", "label": "姓" },
    { "type": "input", "name": "email", "label": "邮箱", "inputType": "email" },
    { "type": "input", "name": "phone", "label": "电话", "inputType": "tel" },
    { "type": "datepicker", "name": "birthday", "label": "生日" },
    { "type": "select", "name": "country", "label": "国家", "api": "/api/countries" }
  ]
}
```

### Table 表格

带有排序、筛选和分页的数据表格。

**协议:**

```typescript
{
  type: 'table',
  api?: string,               // 数据端点
  data?: any[],               // 静态数据
  columns: Array<{
    name: string,
    label: string,
    type?: 'text' | 'number' | 'boolean' | 'date' | 'image',
    sortable?: boolean,
    filterable?: boolean,
    width?: number | string,
    render?: string,          // 自定义渲染模板
  }>,
  rowActions?: Action[],      // 每行操作
  batchActions?: Action[],    // 批量操作
  pagination?: boolean,
  pageSize?: number,
  searchable?: boolean,       // 全局搜索
  filters?: Array<{
    name: string,
    label: string,
    type: 'input' | 'select' | 'datepicker'
  }>,
  selectable?: boolean,       // 行选择
  expandable?: Component,     // 可展开行内容
}
```

**示例 - 基础表格:**

```json
{
  "type": "table",
  "api": "/api/users",
  "columns": [
    { "name": "id", "label": "ID", "width": 80 },
    { "name": "name", "label": "姓名", "sortable": true },
    { "name": "email", "label": "邮箱", "sortable": true },
    { "name": "role", "label": "角色", "filterable": true },
    { "name": "createdAt", "label": "创建时间", "type": "date", "sortable": true }
  ],
  "rowActions": [
    { "label": "编辑", "onClick": { "type": "navigate", "url": "/users/${id}/edit" } },
    { "label": "删除", "onClick": { "type": "api", "api": "/api/users/${id}", "method": "DELETE", "confirm": "删除此用户?" } }
  ],
  "pagination": true,
  "pageSize": 20,
  "searchable": true
}
```

**示例 - CRUD 表格:**

```json
{
  "type": "table",
  "api": "/api/products",
  "columns": [
    { "name": "name", "label": "产品名称" },
    { "name": "price", "label": "价格", "type": "number" },
    { "name": "stock", "label": "库存", "type": "number" },
    { "name": "active", "label": "激活", "type": "boolean" }
  ],
  "filters": [
    { "name": "category", "label": "分类", "type": "select", "api": "/api/categories" },
    { "name": "priceRange", "label": "价格区间", "type": "input" }
  ],
  "selectable": true,
  "batchActions": [
    { "label": "批量删除", "onClick": { "type": "api", "api": "/api/products/batch-delete", "method": "POST" } },
    { "label": "导出", "onClick": { "type": "download", "url": "/api/products/export" } }
  ],
  "rowActions": [
    { "label": "编辑", "onClick": { "type": "dialog", "title": "编辑产品", "body": { "type": "form", "fields": [...] } } },
    { "label": "删除", "onClick": { "type": "api", "api": "/api/products/${id}", "method": "DELETE" } }
  ]
}
```

## 操作(Actions)

操作定义 ObjectUI 中的交互行为。

### API 请求

发起 HTTP 请求。

**协议:**

```typescript
{
  type: 'api',
  api: string,                // API 端点
  method?: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE',
  data?: object | string,     // 请求体 (支持模板)
  headers?: object,           // 请求头
  confirm?: string,           // 确认消息
  onSuccess?: Action,         // 成功处理器
  onError?: Action,           // 错误处理器
}
```

**示例:**

```json
{
  "type": "button",
  "label": "保存",
  "onClick": {
    "type": "api",
    "api": "/api/users/${userId}",
    "method": "PUT",
    "data": "${formData}",
    "confirm": "保存更改?",
    "onSuccess": {
      "type": "toast",
      "message": "保存成功!"
    }
  }
}
```

### 导航

导航到不同页面。

**协议:**

```typescript
{
  type: 'navigate',
  url: string,                // 目标 URL (支持模板)
  newTab?: boolean,           // 在新标签页打开
  replace?: boolean,          // 替换当前历史记录
}
```

**示例:**

```json
{
  "type": "button",
  "label": "查看详情",
  "onClick": {
    "type": "navigate",
    "url": "/users/${userId}"
  }
}
```

### 对话框

打开模态对话框。

**协议:**

```typescript
{
  type: 'dialog',
  title?: string,
  width?: number | string,
  body: Component,
  footer?: Component[],
  closable?: boolean,
}
```

**示例:**

```json
{
  "type": "button",
  "label": "添加用户",
  "onClick": {
    "type": "dialog",
    "title": "创建新用户",
    "width": 600,
    "body": {
      "type": "form",
      "api": "/api/users",
      "fields": [...]
    }
  }
}
```

### 提示消息

显示通知消息。

**协议:**

```typescript
{
  type: 'toast',
  message: string,            // 消息文本 (支持模板)
  variant?: 'success' | 'error' | 'warning' | 'info',
  duration?: number,          // 自动关闭时长 (毫秒)
}
```

**示例:**

```json
{
  "type": "toast",
  "message": "操作成功完成!",
  "variant": "success",
  "duration": 3000
}
```

## 完整示例

### 用户管理 CRUD

```json
{
  "type": "page",
  "title": "用户管理",
  "actions": [
    {
      "label": "添加用户",
      "onClick": {
        "type": "dialog",
        "title": "创建用户",
        "body": {
          "type": "form",
          "api": "/api/users",
          "method": "POST",
          "fields": [
            { "type": "input", "name": "name", "label": "姓名", "required": true },
            { "type": "input", "name": "email", "label": "邮箱", "inputType": "email", "required": true },
            { "type": "select", "name": "role", "label": "角色", "options": [
              { "label": "管理员", "value": "admin" },
              { "label": "用户", "value": "user" }
            ]}
          ],
          "onSuccess": [
            { "type": "toast", "message": "用户已创建!" },
            { "type": "reload" }
          ]
        }
      }
    }
  ],
  "body": {
    "type": "table",
    "api": "/api/users",
    "columns": [
      { "name": "name", "label": "姓名", "sortable": true },
      { "name": "email", "label": "邮箱" },
      { "name": "role", "label": "角色" },
      { "name": "createdAt", "label": "创建时间", "type": "date" }
    ],
    "rowActions": [
      {
        "label": "编辑",
        "onClick": {
          "type": "dialog",
          "title": "编辑用户",
          "body": {
            "type": "form",
            "api": "/api/users/${id}",
            "method": "PUT",
            "initialValues": "${row}",
            "fields": [
              { "type": "input", "name": "name", "label": "姓名" },
              { "type": "input", "name": "email", "label": "邮箱" }
            ]
          }
        }
      },
      {
        "label": "删除",
        "onClick": {
          "type": "api",
          "api": "/api/users/${id}",
          "method": "DELETE",
          "confirm": "删除此用户?",
          "onSuccess": [
            { "type": "toast", "message": "用户已删除" },
            { "type": "reload" }
          ]
        }
      }
    ],
    "searchable": true,
    "pagination": true
  }
}
```

## 下一步

- **[渲染器使用](/docs/03-objectui/renderer-usage)** - 了解如何在应用中集成这些组件
