---
title: Renderer Usage
description: Integrating ObjectUI React renderer in your applications
---

# Renderer Usage

Learn how to integrate the ObjectUI renderer into your React applications, customize styles, and implement advanced features.

## Installation

Install the ObjectUI React renderer package:

```bash
npm install @objectstack/react-renderer
```

Or with yarn:

```bash
yarn add @objectstack/react-renderer
```

Or with pnpm:

```bash
pnpm add @objectstack/react-renderer
```

## Basic Usage

### Simple Integration

The simplest way to use ObjectUI is to render a protocol directly:

```tsx
import { ObjectUIRenderer } from '@objectstack/react-renderer'

const protocol = {
  type: 'page',
  title: 'My App',
  body: {
    type: 'card',
    title: 'Welcome',
    body: {
      type: 'text',
      value: 'Hello, ObjectUI!'
    }
  }
}

function App() {
  return <ObjectUIRenderer schema={protocol} />
}

export default App
```

### With Data Context

Pass data to the renderer via context:

```tsx
import { ObjectUIRenderer } from '@objectstack/react-renderer'

const protocol = {
  type: 'card',
  title: '${user.name}',
  body: [
    { type: 'text', value: 'Email: ${user.email}' },
    { type: 'text', value: 'Role: ${user.role}' }
  ]
}

function UserProfile({ userId }) {
  const [user, setUser] = useState(null)
  
  useEffect(() => {
    fetch(`/api/users/${userId}`)
      .then(res => res.json())
      .then(setUser)
  }, [userId])
  
  if (!user) return <div>Loading...</div>
  
  return (
    <ObjectUIRenderer 
      schema={protocol} 
      data={{ user }}
    />
  )
}
```

### Dynamic Protocol

Load protocol dynamically from API or database:

```tsx
import { ObjectUIRenderer } from '@objectstack/react-renderer'

function DynamicPage({ pageId }) {
  const [protocol, setProtocol] = useState(null)
  
  useEffect(() => {
    // Fetch protocol from API
    fetch(`/api/pages/${pageId}`)
      .then(res => res.json())
      .then(data => setProtocol(data.protocol))
  }, [pageId])
  
  if (!protocol) return <div>Loading...</div>
  
  return <ObjectUIRenderer schema={protocol} />
}
```

## Configuration

### Global Configuration

Configure the renderer globally with default settings:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'

function App() {
  return (
    <ObjectUIProvider
      config={{
        apiBaseUrl: 'https://api.example.com',
        locale: 'en-US',
        theme: 'light',
        errorHandler: (error) => {
          console.error('ObjectUI Error:', error)
        }
      }}
    >
      <YourApp />
    </ObjectUIProvider>
  )
}
```

### Configuration Options

```typescript
interface ObjectUIConfig {
  // API Configuration
  apiBaseUrl?: string        // Base URL for API requests
  headers?: Record<string, string>  // Default headers for requests
  
  // Localization
  locale?: string            // Locale for date/number formatting
  messages?: Record<string, string>  // Custom i18n messages
  
  // Theme
  theme?: 'light' | 'dark' | 'auto'
  
  // Error Handling
  errorHandler?: (error: Error) => void
  
  // Custom Components
  components?: Record<string, React.ComponentType>
  
  // Custom Actions
  actions?: Record<string, ActionHandler>
}
```

## Theming and Styling

### Using Built-in Themes

ObjectUI comes with built-in themes:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'
import '@objectstack/react-renderer/themes/light.css'

function App() {
  return (
    <ObjectUIProvider config={{ theme: 'light' }}>
      <YourApp />
    </ObjectUIProvider>
  )
}
```

Available themes:
- `light` - Light theme
- `dark` - Dark theme
- `compact` - Compact spacing
- `comfortable` - Comfortable spacing

### Custom Theme

Create a custom theme by overriding CSS variables:

```css
/* custom-theme.css */
:root {
  /* Primary Colors */
  --objectui-primary: #1976d2;
  --objectui-primary-hover: #1565c0;
  --objectui-primary-active: #0d47a1;
  
  /* Text Colors */
  --objectui-text-primary: #212121;
  --objectui-text-secondary: #757575;
  
  /* Background Colors */
  --objectui-bg-primary: #ffffff;
  --objectui-bg-secondary: #f5f5f5;
  
  /* Border Colors */
  --objectui-border-color: #e0e0e0;
  --objectui-border-radius: 4px;
  
  /* Spacing */
  --objectui-spacing-xs: 4px;
  --objectui-spacing-sm: 8px;
  --objectui-spacing-md: 16px;
  --objectui-spacing-lg: 24px;
  --objectui-spacing-xl: 32px;
  
  /* Typography */
  --objectui-font-family: 'Roboto', sans-serif;
  --objectui-font-size-sm: 12px;
  --objectui-font-size-md: 14px;
  --objectui-font-size-lg: 16px;
  --objectui-font-size-xl: 20px;
}
```

Import your custom theme:

```tsx
import '@objectstack/react-renderer/dist/style.css'
import './custom-theme.css'
```

### Component-Level Styling

Apply styles to individual components via protocol:

```json
{
  "type": "card",
  "className": "custom-card",
  "style": {
    "backgroundColor": "#f5f5f5",
    "padding": "24px",
    "borderRadius": "8px"
  },
  "body": {
    "type": "text",
    "value": "Styled card"
  }
}
```

### CSS Modules

Use CSS modules for scoped styles:

```tsx
// UserCard.module.css
.card {
  background: #f5f5f5;
  padding: 20px;
  border-radius: 8px;
}

.title {
  font-size: 18px;
  font-weight: bold;
  color: #333;
}
```

```tsx
import { ObjectUIRenderer } from '@objectstack/react-renderer'
import styles from './UserCard.module.css'

const protocol = {
  type: 'card',
  className: styles.card,
  title: 'User Profile',
  body: {
    type: 'text',
    className: styles.title,
    value: '${user.name}'
  }
}

function UserCard({ user }) {
  return <ObjectUIRenderer schema={protocol} data={{ user }} />
}
```

## Custom Components

Extend ObjectUI with custom components:

### Registering Custom Components

```tsx
import { ObjectUIProvider, registerComponent } from '@objectstack/react-renderer'

// Define custom component
function CustomBanner({ title, message, variant }) {
  return (
    <div className={`banner banner-${variant}`}>
      <h3>{title}</h3>
      <p>{message}</p>
    </div>
  )
}

// Register component
registerComponent('customBanner', CustomBanner)

// Use in protocol
const protocol = {
  type: 'page',
  body: {
    type: 'customBanner',
    title: 'Welcome',
    message: 'This is a custom component',
    variant: 'info'
  }
}
```

### Custom Component with Actions

```tsx
import { useObjectUIAction } from '@objectstack/react-renderer'

function CustomButton({ label, onClick }) {
  const executeAction = useObjectUIAction()
  
  const handleClick = () => {
    executeAction(onClick)
  }
  
  return (
    <button className="custom-button" onClick={handleClick}>
      {label}
    </button>
  )
}

registerComponent('customButton', CustomButton)
```

## Custom Actions

Implement custom action handlers:

```tsx
import { ObjectUIProvider, registerAction } from '@objectstack/react-renderer'

// Register custom action
registerAction('sendEmail', async (action, context) => {
  const { to, subject, body } = action
  
  await fetch('/api/send-email', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ to, subject, body })
  })
  
  return { success: true }
})

// Use in protocol
const protocol = {
  type: 'button',
  label: 'Send Email',
  onClick: {
    type: 'sendEmail',
    to: '${user.email}',
    subject: 'Welcome',
    body: 'Welcome to our platform!'
  }
}
```

## API Integration

### Global API Configuration

Configure API settings globally:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'

function App() {
  return (
    <ObjectUIProvider
      config={{
        apiBaseUrl: 'https://api.example.com',
        headers: {
          'Authorization': `Bearer ${getToken()}`,
          'Content-Type': 'application/json'
        },
        // Transform request before sending
        requestTransform: (config) => {
          // Add custom headers, modify URL, etc.
          return config
        },
        // Transform response before using
        responseTransform: (response) => {
          // Extract data, handle errors, etc.
          return response.data
        }
      }}
    >
      <YourApp />
    </ObjectUIProvider>
  )
}
```

### Custom Fetch Handler

Implement custom fetch logic:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'

const customFetch = async (url, options) => {
  // Add authentication
  const token = localStorage.getItem('token')
  const headers = {
    ...options?.headers,
    'Authorization': `Bearer ${token}`
  }
  
  // Make request
  const response = await fetch(url, { ...options, headers })
  
  // Handle errors
  if (!response.ok) {
    throw new Error(`HTTP ${response.status}: ${response.statusText}`)
  }
  
  return response.json()
}

function App() {
  return (
    <ObjectUIProvider config={{ fetch: customFetch }}>
      <YourApp />
    </ObjectUIProvider>
  )
}
```

## State Management

### Local State

Components manage their own state automatically:

```json
{
  "type": "form",
  "fields": [
    {
      "type": "input",
      "name": "search",
      "placeholder": "Search...",
      "onChange": {
        "type": "setState",
        "key": "searchQuery",
        "value": "${value}"
      }
    },
    {
      "type": "table",
      "api": "/api/items?search=${searchQuery}",
      "columns": [...]
    }
  ]
}
```

### Shared State

Share state across components:

```tsx
import { ObjectUIProvider, useObjectUIState } from '@objectstack/react-renderer'

function App() {
  const [globalState, setGlobalState] = useState({
    user: null,
    settings: {}
  })
  
  return (
    <ObjectUIProvider 
      config={{ 
        state: globalState,
        setState: setGlobalState 
      }}
    >
      <YourApp />
    </ObjectUIProvider>
  )
}
```

## Error Handling

### Global Error Handler

Handle errors globally:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'

function App() {
  const handleError = (error, context) => {
    console.error('ObjectUI Error:', error)
    
    // Log to error tracking service
    errorTracker.log(error, context)
    
    // Show user-friendly message
    toast.error('Something went wrong. Please try again.')
  }
  
  return (
    <ObjectUIProvider config={{ errorHandler: handleError }}>
      <YourApp />
    </ObjectUIProvider>
  )
}
```

### Component-Level Error Handling

```json
{
  "type": "table",
  "api": "/api/users",
  "onError": {
    "type": "toast",
    "message": "Failed to load users",
    "variant": "error"
  },
  "fallback": {
    "type": "text",
    "value": "Unable to load data. Please try again later."
  }
}
```

## Performance Optimization

### Lazy Loading

Load components on demand:

```tsx
import { lazy, Suspense } from 'react'
import { ObjectUIRenderer } from '@objectstack/react-renderer'

const LazyComponent = lazy(() => import('./HeavyComponent'))

const protocol = {
  type: 'page',
  body: {
    type: 'lazy',
    component: LazyComponent,
    fallback: { type: 'text', value: 'Loading...' }
  }
}
```

### Memoization

Memoize expensive computations:

```tsx
import { useMemo } from 'react'
import { ObjectUIRenderer } from '@objectstack/react-renderer'

function OptimizedPage({ data }) {
  const protocol = useMemo(() => ({
    type: 'table',
    data: data,
    columns: [...]
  }), [data])
  
  return <ObjectUIRenderer schema={protocol} />
}
```

## Best Practices

### 1. Protocol Organization

Keep protocols organized and maintainable:

```tsx
// protocols/user-management.ts
export const userTableProtocol = {
  type: 'table',
  api: '/api/users',
  columns: [...]
}

export const userFormProtocol = {
  type: 'form',
  api: '/api/users',
  fields: [...]
}

// pages/UserManagement.tsx
import { userTableProtocol } from './protocols/user-management'
```

### 2. Type Safety

Use TypeScript for type-safe protocols:

```typescript
import { Protocol } from '@objectstack/react-renderer'

const protocol: Protocol = {
  type: 'page',
  title: 'Users',
  body: {
    type: 'table',
    api: '/api/users'
  }
}
```

### 3. Reusable Templates

Create reusable protocol templates:

```typescript
// templates/crud-page.ts
export const createCRUDPage = (
  title: string,
  api: string,
  columns: Column[],
  fields: Field[]
) => ({
  type: 'page',
  title,
  actions: [
    {
      label: `Add ${title}`,
      onClick: {
        type: 'dialog',
        title: `Create ${title}`,
        body: {
          type: 'form',
          api,
          fields
        }
      }
    }
  ],
  body: {
    type: 'table',
    api,
    columns,
    rowActions: [
      { label: 'Edit', onClick: {...} },
      { label: 'Delete', onClick: {...} }
    ]
  }
})

// Usage
const userPage = createCRUDPage('User', '/api/users', userColumns, userFields)
```

### 4. Environment-Specific Configuration

Use environment variables:

```tsx
import { ObjectUIProvider } from '@objectstack/react-renderer'

const config = {
  apiBaseUrl: process.env.REACT_APP_API_URL,
  theme: process.env.REACT_APP_THEME || 'light'
}

function App() {
  return (
    <ObjectUIProvider config={config}>
      <YourApp />
    </ObjectUIProvider>
  )
}
```

## Troubleshooting

### Common Issues

**Issue: Components not rendering**
- Check protocol syntax and structure
- Verify component types are registered
- Check console for errors

**Issue: API requests failing**
- Verify `apiBaseUrl` configuration
- Check network requests in DevTools
- Ensure proper authentication headers

**Issue: Styles not applying**
- Import ObjectUI CSS: `import '@objectstack/react-renderer/dist/style.css'`
- Check CSS specificity
- Verify theme configuration

## Next Steps

- Explore [Component Spec](/docs/03-objectui/component-spec) for detailed component reference
- Check out [Core Concepts](/docs/03-objectui/core-concepts) for architectural understanding
- Join the community for support and examples
