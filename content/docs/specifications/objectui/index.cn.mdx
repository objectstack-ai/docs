---
title: 概述
description: 服务端驱动 UI (SDUI) 协议简介。将用户界面视为数据。
---

# ObjectUI 协议

**ObjectUI** 是用于将用户界面描述为 **JSON 数据**的标准协议。

它将界面的*定义*与*渲染*实现解耦。这使后端能够规定应用程序的布局、逻辑和流程，从而实现即时更新、A/B 测试和动态权限等功能，无需重新部署前端代码。

## 核心问题

在传统单页应用 (SPA) 开发中，应用程序的"形状"被硬编码在 JavaScript/TypeScript 中：

```tsx
// 硬编码方式（传统）
const UserProfile = ({ user }) => {
  // 逻辑与视图耦合
  if (!user.isAdmin) return <AccessDenied />;
  
  return (
    <div className="grid grid-cols-2">
      <TextField label="Name" value={user.name} />
      <TextField label="Email" value={user.email} />
    </div>
  );
};

```

如果要添加"电话号码"字段或将布局更改为单列，您必须：

1. 修改代码。
2. 重新构建捆绑包。
3. 重新部署应用程序。

## ObjectUI 解决方案（界面即数据）

ObjectUI 将界面视为递归 JSON 树。前端成为通用**渲染引擎**。

```json
// ObjectUI 方式（协议）
{
  "type": "layout.grid",
  "props": { "columns": 2 },
  "children": [
    { 
      "type": "field.text", 
      "bind": "user.name",
      "props": { "label": "Name" } 
    },
    { 
      "type": "field.text", 
      "bind": "user.email",
      "props": { "label": "Email" },
      "hidden": "!user.isAdmin" // 逻辑即数据
    }
  ]
}

```

如果要更改布局，服务器只需发送不同的 JSON。**无需部署。**

## 关键概念

### 1. 组件节点

UI 中的每个元素——无论是简单按钮还是复杂看板——都由一个**节点**表示。

* **`type`**: 标识符（例如，`form`、`chart`、`button`）。
* **`props`**: 视觉配置（直接传递给 React 组件）。
* **`children`**: 嵌套节点（用于布局）。

### 2. 渲染器和注册表

**渲染器**是遍历 JSON 树的递归函数。
**注册表**将字符串 `type` 映射到物理 React 组件。

> **注意：** ObjectUI 基于 **Shadcn UI** 和 **Tailwind CSS** 构建。JSON 协议直接映射到这些高质量的原语，确保结果看起来专业且手工编码，而不是通用的"低代码"工具。

### 3. 数据绑定

组件不是静态的。它们绑定到**数据范围**。

* `bind: "order.total"` 告诉组件订阅全局状态中 `order` 对象的 `total` 字段。
* 双向绑定由引擎自动处理。

### 4. 动作协议

事件是可序列化的。我们不传递函数（不能序列化为 JSON），而是定义**动作**。

* **传统方式：** `onClick={() => navigate('/home')}`
* **ObjectUI：** `onClick: [{ action: 'navigate', url: '/home' }]`

## 为什么选择服务端驱动 UI？

| 优势 | 说明 |
| --- | --- |
| **即时灵活性** | 在数据库模式中添加字段，UI 立即在网页、移动设备和桌面上更新。 |
| **一致性** | 设计系统由协议强制执行。开发者不会"意外地"使用错误的填充或颜色。 |
| **负载效率** | 前端捆绑包大小保持不变，无论 ERP 系统有多少页。 |
| **AI 生成** | LLM 更容易生成有效的 JSON 结构，而不是编写正确的、可编译的 React 代码。 |

## 后续步骤

* 学习**[JSON Schema 结构](component-schema)**。
* 探索**[布局系统](layout-system)**。
* 理解**[动作和事件](action-triggers)**。
