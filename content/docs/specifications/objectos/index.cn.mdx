---
title: ObjectOS 概述
description: 业务操作系统介绍。身份、同步和编排的内核。
---

# ObjectOS 协议

**ObjectOS** 是 ObjectStack 生态系统的运行时**内核**。

虽然 ObjectQL 定义*结构*（数据），ObjectUI 定义*外观*（视图），但 ObjectOS 定义**生命**。它负责编排身份、强制执行安全性、管理数据同步和执行业务逻辑。

## 内核隐喻

将标准 Web 框架（如 Express 或 NestJS）视为"裸机"环境，您必须手动配置身份验证、数据库连接和 API 路由。

ObjectOS 像一个**操作系统**一样为您的业务逻辑服务：
1.  **启动：** 它加载核心服务（Auth、HTTP、Sync）。
2.  **挂载：** 它将 ObjectQL Schema 定义加载到内存中。
3.  **运行：** 它在沙盒化的、受治理的环境中执行插件和工作流。


## 核心责任

ObjectOS 解决企业后端开发的"硬问题"，以便您无需重新发明它们。

### 1. 身份与治理（守卫）
仅仅"登录"是不够的。企业应用需要复杂的治理。
* **身份验证：** 本地支持 OIDC、SAML 和 JWT。
* **RBAC：** 在 API 网关级别强制执行基于角色的访问控制。
* **审计：** 自动记录*谁*对*哪条记录*做了*什么*（不可变审计日志）。

### 2. 本地优先同步（桥梁）
这是 ObjectOS 的区别特征。它充当离线优先客户端的**复制主机**。
* **差分同步：** 计算客户端本地数据库和服务器数据库之间的"增量"（变化）。
* **冲突解决：** 实现诸如最后写入获胜 (LWW) 或向量时钟之类的策略来处理离线用户的并发编辑。

### 3. 工作流编排（指挥）
业务逻辑被建模为**状态机**，而不是意大利面条代码。
* ObjectOS 管理文档的转换（例如，`Draft` -> `Pending` -> `Approved`）。
* 它在状态变化发生时执行**触发器**和 **Webhook**。

### 4. 事件总线（神经系统）
ObjectOS 从根本上是**事件驱动**的。
* 它为模块间通信提供了一个集中的 `Broker`。
* *示例：* 当 `CRM` 插件发出 `deal.won` 时，`Finance` 插件监听并自动生成发票。

## 插件架构

ObjectOS 遵循**微内核架构**。核心很小；其他一切都是**插件**。

即使是标准功能（如"用户管理"或"文件上传"）也只是插件。这确保了系统是模块化的、精简的。

### 插件解剖

插件是一个自包含的包，通过**清单**声明其功能。

```typescript
// plugins/crm/manifest.ts
export default definePlugin({
  id: "steedos-crm",
  version: "1.0.0",
  
  // 此插件所需的依赖项
  dependsOn: ["@objectos/auth", "@objectos/notifications"],
  
  // 此插件对操作系统的贡献
  objects: ["./objects/*.object.yml"],
  workflows: ["./workflows/*.workflow.yml"],
  
  // 生命周期钩子
  async onLoad(ctx) {
    ctx.logger.info("CRM Plugin Booted");
  }
});

```

## 为什么选择 ObjectOS？

| 问题 | ObjectOS 解决方案 |
| --- | --- |
| **意大利面条代码** | 逻辑组织为**插件**和**工作流**。 |
| **安全漏洞** | 安全由**内核**注入（RBAC、FLS），而不是在控制器中编写。 |
| **离线同步** | 内置**同步引擎**处理本地优先数据的复杂性。 |
| **供应商锁定** | 操作系统抽象底层基础设施（DB、文件存储）。 |

## 后续步骤

* **[插件系统](plugin-manifest)：** 如何构建扩展。
* **[工作流引擎](workflow-engine)：** 自动化业务流程。
* **[同步协议](integration-etl)：** 理解复制机制。
* **[安全模型](permission-governance)：** 身份验证和 RBAC 深度解析。
